!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("sexpr-plus"),require("moment")):"function"==typeof define&&define.amd?define(["sexpr-plus","moment"],e):t.UndoTreeParser=e(t.sexprPlus,t.moment)}(this,function(t,e){"use strict";function n(t){var n=t[0],r=t[1];return e.unix(n*Math.pow(2,16)+r).toString()}function r(t){return"number"==typeof t&&t!=+t}function o(t){return"list"===t.type?t.content.map(o):{type:t.type,content:t.content}}function u(t,e){if("list"===e.type){var n=e.content.filter(function(t){return"t"!==t.content}),o=4===n.length&&n.reduce(function(t,e){return t&&!r(parseInt(e.content,0))},!0);return o?t.concat([n.map(function(t){return parseInt(t.content,0)})]):t.concat(n.reduce(u,[]))}return t}function i(e){var r=e.toString(),i=r.slice(r.indexOf("\n")+1),c=t.parse(i),f=(c.map(o),c.reduce(u,[]));console.dir(f.map(n))}function c(t,e){var n=e.editor,r=void 0===n?"emacs":n,o=e.format,u=void 0===o?"unix":o;try{return i(t,{editor:r,format:u})}catch(t){throw t}}return c});